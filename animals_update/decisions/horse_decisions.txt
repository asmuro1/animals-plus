title_decisions = {
    
    start_horse_conv_quest = {
        is_high_prio = yes
        ai_check_interval = 40

        filter = owned
        ai_target_filter = owned

        potential = {
            tier = COUNT
            FROM = {
                OR = {
                    has_game_rule = {
                        name = animals_conversion_ways
                        value = animal_decision
                    }
                    AND = {
                        has_game_rule = {
                            name = animals_conversion_ways
                            value = animal_instant
                        }
                        ai = no
                    }
                }
                Is_really_animal_trigger = no
                is_nomadic = no
            }
            location = {
                Is_really_animal_trigger = no
                NOT = { has_province_flag = horse_conv_quest_CD }
                terrain = steppe
            }
        }
        allow = {
            FROM = {
                OR = {
                    lifestyle_traits == 0
                    trait = hunter
                }
                wealth = 35
            }
            location = {
                custom_tooltip = {
                    text = tt_horse_horse_building
                    OR = {
                        has_building = tb_steppe_barracks_1
                        has_building = tb_steppe_stable_1
                        has_building = ca_steppe_stable_1
                        has_building = ca_steppe_barracks_1
                        has_building = tb_default_horse_conv_quest
                        has_building = ca_default_horse_conv_quest
                    }
                }
            }
        }

        effect = {
            if = {
                limit = {
                    has_game_rule = {
                        name = animals_conversion_ways
                        value = animal_decision
                    }
                }
                FROM = {
                    wealth = -35
                    piety = -100
                }

                location = {
                    province_event = { id = ani_plus.172 days = 7 random = 7 }
                    province_event = { id = ani_plus.171 years = 10 }
                }
            }
            else = {
                FROM = {
                    culture = horse
                }
                location = {
                    culture = horse
                }
            }
        }

        ai_will_do = {
            factor = 1

            modifier = {
                factor = 0.001
                always = yes
            }

            modifier = {
                factor = 50 # 5%
                OR = {
                    culture_group = altaic
                    culture_group = magyar
                    culture = alan
                    culture_group = iranian
                }
            }
        }
    }
}

decisions = {
    adopt_horse_religion = {
        is_high_prio = yes
        ai_check_interval = 3

        potential = {
            culture_group = horse_group
            NOT = { religion = Horse_religion }
            can_change_religion = yes
        }
        allow = {
            is_adult = yes
            culture_group = horse_group
            has_regent = no
            is_incapable = no
            can_change_religion = yes
        }

        effect = {
            religion = Horse_religion

            if = {
                limit = {
                    OR = {
                        independent = yes
                        liege = { NOT = { religion = Horse_religion } }
                    }
                }
                if = {
                    limit = {
                        has_game_rule = {
                            name = animals_bonus_levy
                            value = Few
                        }
                    }
                    spawn_unit = {
                        province = capital_scope
                        home = capital_scope
                        owner = ROOT
                        leader = none
                        troops = {
                            light_cavalry = 1250
                            knights = 250
                        }
                        attrition = 0.1
                        maintenance = no
                    }
                }
                else_if = {
                    limit = {
                        has_game_rule = {
                            name = animals_bonus_levy
                            value = Normal
                        }
                    }
                    spawn_unit = {
                        province = capital_scope
                        home = capital_scope
                        owner = ROOT
                        leader = none
                        troops = {
                            light_cavalry = { 2750 2750 }
                            knights = { 750 750 }
                        }
                        attrition = 0.1
                        maintenance = no

                    }
                }
                else_if = {
                    limit = {
                        has_game_rule = {
                            name = animals_bonus_levy
                            value = Many
                        }
                    }
                    spawn_unit = {
                        province = capital_scope
                        home = capital_scope
                        owner = ROOT
                        leader = none
                        troops = {
                            light_cavalry = { 6000 6000 }
                            knights = { 1000 1000 }
                        }
                        attrition = 0.05
                        maintenance = no

                    }
                }
            }
        }
    }
}