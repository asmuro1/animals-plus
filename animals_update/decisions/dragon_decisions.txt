decisions = {
    dragon_lay_egg = {
        is_high_prio = yes
        ai_check_interval = 14

        only_rulers = yes

        potential = {
            culture_group = dragon_group
            is_landed = yes
        }
        allow = {
            culture_group = dragon_group
            NOT = { culture = dragon_culture }
            war = no
            is_incapable = no
            is_married = yes
            conditional_tooltip = {
                trigger = { is_married = yes }
                spouse = {
                    culture_group = dragon_group
                }
            }
            custom_tooltip = { # max one every 2 years
                text = TT_dragon_did_not_lay_egg_recently
                
                NOT = {
                    had_character_flag = {
                        flag = dragon_layed_egg
                        years <= 2
                    }
                }
            }
            in_command = no
            dragon_is_adult_trigger = yes
        }

        effect = {
            if = {
                limit = {
                    is_female = yes
                }

                create_character = {
                    age = 0
                    random_traits = no
                    female = random
                    culture = dragon_culture
                    religion = Dragon_religion
                    dynasty = ROOT

                    genetic_father = spouse
                    genetic_mother = ROOT
                }
                spouse = {
                    new_character = {
                        set_mother = ROOT
                        set_father = PREV
                    }
                }
            }
            else = {
                create_character = {
                    age = 0
                    random_traits = no
                    female = random
                    culture = dragon_culture
                    religion = Dragon_religion
                    dynasty = ROOT

                    genetic_father = ROOT
                    genetic_mother = spouse
                }
                spouse = {
                    new_character = {
                        set_father = ROOT
                        set_mother = PREV
                    }
                }
            }

            hidden_tooltip = {
                clr_character_flag = dragon_layed_egg
                set_character_flag = dragon_layed_egg
                spouse = {
                    clr_character_flag = dragon_layed_egg
                    set_character_flag = dragon_layed_egg
                }

                new_character = {
                    set_father_dragon_flag_effect = yes
                    set_mother_dragon_flag_effect = yes
                }
            }
        }

        ai_will_do = {
            factor = 1

            modifier = {
                factor = 0.2
                has_living_children = yes
            }
        }
    }
    go_search_for_dragon_egg = {

        is_high_prio = yes
        ai_check_interval = 45

        only_playable = yes

        potential = {
            OR = {
                has_game_rule = {
                    name = animals_conversion_ways
                    value = animal_decision
                }
                AND = {
                    has_game_rule = {
                        name = animals_conversion_ways
                        value = animal_instant
                    }
                    ai = no
                }
            }

            Is_really_animal_trigger = no
            NOT = {
                has_artifact = dragon_egg_artifact
            }
        }
        allow = {
            is_adult = yes
            is_incapable = no
            has_regent = no
            in_command = no
            
            wealth = 1000

            OR = {
                trait = impaler
                lifestyle_traits == 0
            }

            capital_scope = {
                has_fort = yes
                OR = {
                    is_black_dragon_province_trigger = yes
                    is_white_dragon_province_trigger = yes
                    is_red_dragon_province_trigger = yes
                    is_blue_dragon_province_trigger = yes
                    is_yellow_dragon_province_trigger = yes
                }
            }
        }

        effect = {
            wealth = -1000
            if = {
                limit = {
                    has_game_rule = {
                        name = animals_conversion_ways
                        value = animal_decision
                    }
                }
                add_artifact = dragon_egg_artifact
            }
            else = {
                convert_to_dragon_culture_effect = yes
            }
        }
        ai_will_do = {
            factor = 1
            modifier = {
                factor = 0.001

                always = yes
            }
        }
    }

    dragon_goes_battlefield = {
        is_high_prio = yes
        ai_check_interval = 12

        only_playable = yes

        potential = {
            government = dragon_tribal_gov
            tier = COUNT
            NOT = { has_character_flag = formed_dragon_retinue }
        }
        allow = {
            ruled_years = 1
            dragon_is_adult_trigger = yes
        }

        effect = {
            if = {
                limit = {
                    has_dlc = "Legacy of Rome"
                }
                create_retinue = RETTYPE_CUL_DRAGON
            }
            else = {
                spawn_unit = {
                    province = capital_scope
                    owner = ROOT
                    troops = {
                        knights = { 100 100 }
                    }
                    cannot_inherit = no
                    reinforces = yes
                    reinforce_rate_multiplier = 0.1
                    maintenance_multiplier = 0.5
                }
            }
            set_character_flag = formed_dragon_retinue
        }

        ai_will_do = {
            factor = 1
        }
    }
}